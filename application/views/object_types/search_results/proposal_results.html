<?php
  $categorized_results = array();
  $my_category_name = " My Proposals";
  foreach($results as $object_id => $object_info){
    $year = $object_info['end_date'];
    if(array_key_exists($object_id, $my_objects)){
      $categorized_results[$my_category_name][$object_id] = $object_info;
    }else{
      $categorized_results[$year][$object_id] = $object_info;
    }

    if(!is_string($year)){
      $year = $year->format('Y');
    }
    $categorized_results[$year][$object_id] = $object_info;
  }
  krsort($categorized_results);
?>
<?php foreach($categorized_results as $category => $type_items): ?>
  <?php $category = $category == $my_category_name ? trim($my_category_name) : "Ending Year {$category}"; ?>
<ul id='<?= $object_type ?>_<?= $category ?>_search_results' class="search_results_list">
  <div>
    <?= $category ?>
  </div>
  <?php foreach($type_items as $object_id => $object_info): ?>
  <li>
    <input type="checkbox" id="proposal_id_<?= $object_id ?>" name="proposal_id_<?= $object_id ?>" />
    <span id="proposal_<?= $object_id ?>" name="proposal_name_<?= $object_id ?>">
      <?= $object_info['display_name'] ?>
    </span>
  </li>
  <?php endforeach; ?>
</ul>
<?php endforeach; ?>
